{% extends "blog_base.html" %}

{% block mixpanel_event %}
mixpanel.track('View Blog Article List');
{% endblock %}

{% block body_id %}blog_index{% endblock %}

{% block header %}
<header><h1><a href="{{ SITEURL }}/{{ BLOG_URL }}">Cocode</a></h1></header>
{% endblock %}

{% block content %}
  {% for article in articles_page.object_list %}
  <div class="timeline-bullet icon-{{ article.category }}"></div>
    <article>
        <div class="timeline"></div>
        <h2><a href="{{ SITEURL }}/{{ article.url }}" rel="bookmark" title="Permalink to {{ article.title|striptags }}">{{ article.title }}</a></h2>

        {% include 'article_meta.html' %}

        {{ article.summary }}

        <a href="{{ SITEURL }}/{{ article.url }}">Read more &rarr;</a>

        {% if article.tags %}
          <ul class="tags">
            {% for tag in article.tags %}
              <li><a href="{{ SITEURL }}/{{ tag.url }}">{{ tag }}</a></li>
            {% endfor %}
          </ul>
        {% endif %}
    </article>
  {% endfor %}
{% endblock %}

{% block footer %}
    {{ super() }}
    <script type="text/javascript">
        function f(){
            var a=($("header").width()/930)*476;var b=$(window).height()-a-(($("header").width()/370)*435);$("header").css("background-position","bottom , 0 "+b+"px");
            $(".timeline").each(function(){$(this).height($(this).parent().height())})
            $('.timeline:last').height(document.height - $('.timeline:last').offset().top);
        }
        $(window).resize(f);
        f();
    </script>
{% endblock %}

